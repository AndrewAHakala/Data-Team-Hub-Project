version: 2
# First, define the group and owner
groups:
  - name: finance
    owner:
      name: Andrew Hakala
      email: andrew.hakala@dbtlabs.com

models:

  # define the model name
  - name: monthly_gross_revenue

    # defining this models configurations
    config:

      # be enforcing a contract we enfore the models column names, data types, and additional constraints (think not null)
      contract:
        enforced: true

      # we tag this model to certain teams
      tags: ['finance', 'RevOps']
      group: finance
      access: public
    description: '{{ doc("monthly_gross_revenue_desc") }}'

    # we then define the model column information
    columns:

      # our first column
      - name: order_month

        # we enforce this data type because this model is a contract
        data_type: date

        # we define a column description
        description: The month the order was placed

        # we apply tests to this column
        tests:
          - not_null

        # we can also have column level tags  
        config:
          tags: ['a_column_level_tag_example']
          meta:
            is_certified: true
            certification_level: gold
      - name: region_name

        data_type: text

        description: the region in which revenue occured

        tests:
          - not_null

        config:
          meta:
            is_certified: true
            certification_level: silver
      - name: gross_revenue

        data_type: number

        description: the gross revenue generated for the given line item

        # we apply tests to this column
        tests:
          - not_null:
              description: this is a not null test
          - warn_gross_revenue_is_negative:
              description: testing the description of this test XYZ
              config:
                severity: warn
        config:
          meta:
            is_certified: false
            certification_level: uncertified